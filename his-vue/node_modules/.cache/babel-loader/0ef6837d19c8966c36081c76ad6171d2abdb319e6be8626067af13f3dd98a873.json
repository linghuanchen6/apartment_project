{"ast":null,"code":"import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nexport default {\n  //组件使用的数据\n  data: function data() {\n    return {\n      ticketPage: {},\n      queryCondition: {\n        id: '',\n        name: '',\n        currentPage: 1,\n        pageSize: 10\n      },\n      OpenDialog: false,\n      actionType: '',\n      formData: {\n        id: '',\n        name: '',\n        category: '',\n        memo: '',\n        idNumber: '',\n        status: 0\n      },\n      tickets: []\n    };\n  },\n  methods: {\n    getTicketList: function getTicketList() {\n      var _this = this;\n      this.$http.get('/api/ticket/list', {\n        params: this.queryCondition\n      }).then(function (res) {\n        console.log(res);\n        _this.ticketPage = res.data.data.ticketPage;\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.queryCondition.pageSize = val;\n      this.getTicketList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.queryCondition.currentPage = val;\n      this.getTicketList();\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.tickets = val;\n    },\n    deleteBatch: function deleteBatch() {\n      var _this2 = this;\n      var ids = '';\n      var names = '';\n      this.tickets.forEach(function (tickets) {\n        ids += tickets.id + ',';\n        names += tickets.name + ',';\n      });\n      ids = ids.substring(0, ids.length - 1);\n      names = names.substring(0, names.length - 1);\n      var result = this.$confirm('是否确认删除【' + names + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        console.log(ids);\n        _this2.$http[\"delete\"]('/api/ticket/deleteBatch?ids=' + ids).then(function (res) {\n          if (res.data.status == 1) {\n            _this2.$message.success(res.data.message);\n            _this2.getTicketList();\n          } else {\n            _this2.$message.error(res.data.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    },\n    remove: function remove(id, name) {\n      var _this3 = this;\n      this.$confirm('是否确认删除【' + name + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this3.$http[\"delete\"]('/api/ticket/remove/' + id).then(function (res) {\n          if (res.data.status == 1) {\n            _this3.$message.success(res.data.message);\n            _this3.getTicketList();\n          } else {\n            _this3.$message.error(res.data.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    }\n  },\n  mounted: function mounted() {\n    this.getTicketList();\n  }\n};","map":{"version":3,"names":["data","ticketPage","queryCondition","id","name","currentPage","pageSize","OpenDialog","actionType","formData","category","memo","idNumber","status","tickets","methods","getTicketList","_this","$http","get","params","then","res","console","log","handleSizeChange","val","handleCurrentChange","handleSelectionChange","deleteBatch","_this2","ids","names","forEach","substring","length","result","$confirm","confirmButtonText","cancelButtonText","type","$message","success","message","error","remove","_this3","mounted"],"sources":["src/views/data/Buyticket.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>购票记录管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片容器 -->\r\n    <el-card style=\"margin-top: 30px;\">\r\n\r\n<!--      <el-input v-model=\"queryCondition.name\" placeholder=\"设施名称\" style=\"width: 150px\"></el-input>-->\r\n<!--      <el-button type=\"primary\" style=\"margin-right: 30px\" @click=\"getEquipmentList\">查询</el-button>-->\r\n      <el-button style=\"margin-left: 70%;\" type=\"danger\" @click=\"deleteBatch\">批量删除</el-button>\r\n<!--      <el-button type=\"primary\" @click=\"add\">添加设施</el-button>-->\r\n      <!-- 数据表格 -->\r\n      <el-table :data=\"ticketPage.records\" style=\"width: 80%\" stripe border\r\n                @selection-change=\"handleSelectionChange\">\r\n\r\n        <el-table-column type=\"selection\" />\r\n        <el-table-column type=\"expand\">\r\n          <!-- <template slot-scope=\"props\">\r\n      <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n        <el-tag class=\"tag\" type=\"warning\">药品规格:  {{ props.row.drugFormat }}</el-tag>\r\n        <el-tag class=\"tag\" type=\"success\">生产厂家:  {{ props.row.drugFactory }}</el-tag>\r\n      </el-form>\r\n    </template> -->\r\n        </el-table-column>\r\n        <el-table-column prop=\"id\" label=\"编号\" width=\"180\">\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"category\" label=\"购票种类\" width=\"180\">\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"name\" label=\"购票人\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"idNumber\" label=\"身份证号\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\"\r\n                       @click=\"remove(scope.row.id, scope.row.name)\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                     :current-page=\"queryCondition.currentPage\" :page-sizes=\"[1, 4, 5, 10]\"\r\n                     :page-size=\"queryCondition.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                     :total=\"ticketPage.total\">\r\n      </el-pagination>\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n\r\n  //组件使用的数据\r\n\r\n  data() {\r\n\r\n    return {\r\n\r\n      ticketPage: {},\r\n      queryCondition: {\r\n        id: '',\r\n        name: '',\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n      },\r\n      OpenDialog: false,\r\n      actionType: '',\r\n      formData: {\r\n        id: '',\r\n        name: '',\r\n        category: '',\r\n        memo:'',\r\n        idNumber:'',\r\n        status: 0,\r\n      },\r\n      tickets: [],\r\n    }\r\n  },\r\n  methods: {\r\n    getTicketList() {\r\n      this.$http.get('/api/ticket/list', { params: this.queryCondition }).then(\r\n          res => {\r\n            console.log(res)\r\n            this.ticketPage = res.data.data.ticketPage\r\n          }\r\n      )\r\n    },\r\n    handleSizeChange(val) {\r\n      this.queryCondition.pageSize = val;\r\n      this.getTicketList();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.queryCondition.currentPage = val;\r\n      this.getTicketList();\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.tickets = val\r\n    },\r\n    deleteBatch() {\r\n\r\n      let ids = ''\r\n      let names = ''\r\n\r\n      this.tickets.forEach(tickets => {\r\n        ids += tickets.id + ','\r\n        names += tickets.name + ','\r\n      })\r\n\r\n      ids = ids.substring(0, ids.length - 1)\r\n      names = names.substring(0, names.length - 1)\r\n\r\n      const result = this.$confirm(\r\n          '是否确认删除【' + names + '】', '删除确认',\r\n          {\r\n            confirmButtonText: '删除',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n      ).then(() => {\r\n        console.log(ids)\r\n        this.$http.delete('/api/ticket/deleteBatch?ids=' + ids).then(\r\n            res => {\r\n              if (res.data.status == 1) {\r\n                this.$message.success(res.data.message)\r\n\r\n                this.getTicketList()\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }).catch(() => { })\r\n    },\r\n\r\n    remove(id, name) {\r\n\r\n      this.$confirm(\r\n          '是否确认删除【' + name + '】', '删除确认',\r\n          {\r\n            confirmButtonText: '删除',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n      ).then(() => {\r\n        this.$http.delete('/api/ticket/remove/' + id).then(\r\n            res => {\r\n              if (res.data.status == 1) {\r\n                this.$message.success(res.data.message)\r\n\r\n                this.getTicketList()\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }).catch(() => { })\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n\r\n    this.getTicketList();\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.tag {\r\n  margin-right: 20px;\r\n  margin-left: 10px;\r\n}\r\n</style>"],"mappings":";;;;AA4DA;EAEA;EAEAA,IAAA,WAAAA,KAAA;IAEA;MAEAC,UAAA;MACAC,cAAA;QACAC,EAAA;QACAC,IAAA;QACAC,WAAA;QACAC,QAAA;MACA;MACAC,UAAA;MACAC,UAAA;MACAC,QAAA;QACAN,EAAA;QACAC,IAAA;QACAM,QAAA;QACAC,IAAA;QACAC,QAAA;QACAC,MAAA;MACA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,aAAA,WAAAA,cAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAAC,GAAA;QAAAC,MAAA,OAAAlB;MAAA,GAAAmB,IAAA,CACA,UAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACAL,KAAA,CAAAhB,UAAA,GAAAqB,GAAA,CAAAtB,IAAA,CAAAA,IAAA,CAAAC,UAAA;MACA,CACA;IACA;IACAwB,gBAAA,WAAAA,iBAAAC,GAAA;MACA,KAAAxB,cAAA,CAAAI,QAAA,GAAAoB,GAAA;MACA,KAAAV,aAAA;IACA;IACAW,mBAAA,WAAAA,oBAAAD,GAAA;MACA,KAAAxB,cAAA,CAAAG,WAAA,GAAAqB,GAAA;MACA,KAAAV,aAAA;IACA;IACAY,qBAAA,WAAAA,sBAAAF,GAAA;MACA,KAAAZ,OAAA,GAAAY,GAAA;IACA;IACAG,WAAA,WAAAA,YAAA;MAAA,IAAAC,MAAA;MAEA,IAAAC,GAAA;MACA,IAAAC,KAAA;MAEA,KAAAlB,OAAA,CAAAmB,OAAA,WAAAnB,OAAA;QACAiB,GAAA,IAAAjB,OAAA,CAAAX,EAAA;QACA6B,KAAA,IAAAlB,OAAA,CAAAV,IAAA;MACA;MAEA2B,GAAA,GAAAA,GAAA,CAAAG,SAAA,IAAAH,GAAA,CAAAI,MAAA;MACAH,KAAA,GAAAA,KAAA,CAAAE,SAAA,IAAAF,KAAA,CAAAG,MAAA;MAEA,IAAAC,MAAA,QAAAC,QAAA,CACA,YAAAL,KAAA,gBACA;QACAM,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,CACA,EAAAnB,IAAA;QACAE,OAAA,CAAAC,GAAA,CAAAO,GAAA;QACAD,MAAA,CAAAZ,KAAA,4CAAAa,GAAA,EAAAV,IAAA,CACA,UAAAC,GAAA;UACA,IAAAA,GAAA,CAAAtB,IAAA,CAAAa,MAAA;YACAiB,MAAA,CAAAW,QAAA,CAAAC,OAAA,CAAApB,GAAA,CAAAtB,IAAA,CAAA2C,OAAA;YAEAb,MAAA,CAAAd,aAAA;UACA;YACAc,MAAA,CAAAW,QAAA,CAAAG,KAAA,CAAAtB,GAAA,CAAAtB,IAAA,CAAA2C,OAAA;UACA;QACA,CACA;MACA;IACA;IAEAE,MAAA,WAAAA,OAAA1C,EAAA,EAAAC,IAAA;MAAA,IAAA0C,MAAA;MAEA,KAAAT,QAAA,CACA,YAAAjC,IAAA,gBACA;QACAkC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,CACA,EAAAnB,IAAA;QACAyB,MAAA,CAAA5B,KAAA,mCAAAf,EAAA,EAAAkB,IAAA,CACA,UAAAC,GAAA;UACA,IAAAA,GAAA,CAAAtB,IAAA,CAAAa,MAAA;YACAiC,MAAA,CAAAL,QAAA,CAAAC,OAAA,CAAApB,GAAA,CAAAtB,IAAA,CAAA2C,OAAA;YAEAG,MAAA,CAAA9B,aAAA;UACA;YACA8B,MAAA,CAAAL,QAAA,CAAAG,KAAA,CAAAtB,GAAA,CAAAtB,IAAA,CAAA2C,OAAA;UACA;QACA,CACA;MACA;IACA;EACA;EAEAI,OAAA,WAAAA,QAAA;IAEA,KAAA/B,aAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}