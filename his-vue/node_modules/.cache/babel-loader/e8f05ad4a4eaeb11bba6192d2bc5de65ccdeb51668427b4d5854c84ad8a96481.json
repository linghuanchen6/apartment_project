{"ast":null,"code":"import \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nexport default {\n  //组件使用的数据\n  data: function data() {\n    return {\n      newPage: [],\n      queryCondition: {\n        id: '',\n        title: '',\n        currentPage: 1,\n        pageSize: 10\n      },\n      OpenDialog: false,\n      actionType: '',\n      formData: {\n        id: '',\n        title: '',\n        abstracts: '',\n        content: '',\n        status: 0\n      },\n      formRules: {\n        title: [{\n          required: true,\n          message: '请输入标题',\n          trigger: 'blur'\n        }],\n        abstracts: [{\n          required: true,\n          message: '请输入摘要',\n          trigger: 'blur'\n        }],\n        content: [{\n          required: true,\n          message: '请输入内容',\n          trigger: 'blur'\n        }]\n      },\n      news: []\n    };\n  },\n  methods: {\n    getNewList: function getNewList() {\n      var _this = this;\n      this.$http.get('/api/news/lists', {\n        params: this.queryCondition\n      }).then(function (res) {\n        console.log(res);\n        _this.newPage = res.data.data.newsPage.records;\n      });\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.queryCondition.pageSize = val;\n      this.getNewList();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.queryCondition.currentPage = val;\n      this.getNewList();\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.news = val;\n    },\n    add: function add() {\n      this.formData = {};\n      this.actionType = '添加新闻';\n      this.OpenDialog = true;\n    },\n    modify: function modify(id) {\n      var _this2 = this;\n      this.$http.get('/api/news/get/' + id).then(function (res) {\n        if (res.data.status == 1) {\n          _this2.formData = res.data.data.news;\n          _this2.actionType = '修改新闻';\n          _this2.OpenDialog = true;\n        } else {\n          _this2.$message.error(res.data.message);\n        }\n      });\n    },\n    addOrModify: function addOrModify() {\n      var _this3 = this;\n      this.$refs.formRef.validate(function (valid) {\n        if (valid) {\n          if (_this3.actionType == '添加设施') {\n            _this3.$http.post('/api/news/add', _this3.formData).then(function (res) {\n              if (res.data.status == 1) {\n                _this3.$message.success(res.data.message);\n                _this3.getNewList();\n              } else {\n                _this3.$message.error(res.data.message);\n              }\n            });\n          } else {\n            var data = {\n              id: _this3.formData.id,\n              title: _this3.formData.title,\n              abstracts: _this3.formData.abstracts,\n              content: _this3.formData.content\n            };\n            _this3.$http.post('/api/news/modify', data).then(function (res) {\n              if (res.data.status == 1) {\n                _this3.$message.success(res.data.message);\n                _this3.getNewList();\n              } else {\n                _this3.$message.error(res.data.message);\n              }\n            });\n          }\n          _this3.OpenDialog = false;\n        } else {\n          _this3.$message.error(\"输入数据有误，请检查后再提交\");\n        }\n      });\n    },\n    deleteBatch: function deleteBatch() {\n      var _this4 = this;\n      var ids = '';\n      var titles = '';\n      this.news.forEach(function (news) {\n        ids += news.id + ',';\n        titles += news.title + ',';\n      });\n      ids = ids.substring(0, ids.length - 1);\n      titles = titles.substring(0, titles.length - 1);\n      var result = this.$confirm('是否确认删除【' + titles + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        console.log(ids);\n        _this4.$http[\"delete\"]('/api/news/deleteBatch?ids=' + ids).then(function (res) {\n          if (res.data.status == 1) {\n            _this4.$message.success(res.data.message);\n            _this4.getNewList();\n          } else {\n            _this4.$message.error(res.data.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    },\n    remove: function remove(id, title) {\n      var _this5 = this;\n      this.$confirm('是否确认删除【' + title + '】', '删除确认', {\n        confirmButtonText: '删除',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this5.$http[\"delete\"]('/api/news/remove/' + id).then(function (res) {\n          if (res.data.status == 1) {\n            _this5.$message.success(res.data.message);\n            _this5.getNewList();\n          } else {\n            _this5.$message.error(res.data.message);\n          }\n        });\n      })[\"catch\"](function () {});\n    }\n  },\n  mounted: function mounted() {\n    this.getNewList();\n  }\n};","map":{"version":3,"names":["data","newPage","queryCondition","id","title","currentPage","pageSize","OpenDialog","actionType","formData","abstracts","content","status","formRules","required","message","trigger","news","methods","getNewList","_this","$http","get","params","then","res","console","log","newsPage","records","handleSizeChange","val","handleCurrentChange","handleSelectionChange","add","modify","_this2","$message","error","addOrModify","_this3","$refs","formRef","validate","valid","post","success","deleteBatch","_this4","ids","titles","forEach","substring","length","result","$confirm","confirmButtonText","cancelButtonText","type","remove","_this5","mounted"],"sources":["src/views/data/NewsManage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>新闻管理</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <!-- 卡片容器 -->\r\n    <el-card style=\"margin-top: 30px;\">\r\n\r\n      <el-input v-model=\"queryCondition.title\" placeholder=\"新闻名称\" style=\"width: 150px\"></el-input>\r\n      <el-button type=\"primary\" style=\"margin-right: 30px\" @click=\"getNewList\">查询</el-button>\r\n      <el-button style=\"margin-left: 60%;\" type=\"danger\" @click=\"deleteBatch\">批量删除</el-button>\r\n      <el-button type=\"primary\" @click=\"add\">添加新闻</el-button>\r\n      <!-- 数据表格 -->\r\n      <el-table :data=\"newPage\" style=\"width: 80%\" stripe border\r\n                @selection-change=\"handleSelectionChange\">\r\n\r\n        <el-table-column type=\"selection\" />\r\n        <el-table-column type=\"expand\">\r\n          <!-- <template slot-scope=\"props\">\r\n      <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n        <el-tag class=\"tag\" type=\"warning\">药品规格:  {{ props.row.drugFormat }}</el-tag>\r\n        <el-tag class=\"tag\" type=\"success\">生产厂家:  {{ props.row.drugFactory }}</el-tag>\r\n      </el-form>\r\n    </template> -->\r\n        </el-table-column>\r\n        <el-table-column prop=\"id\" label=\"编号\" width=\"180\">\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"title\" label=\"标题\" width=\"180\">\r\n        </el-table-column>\r\n\r\n        <el-table-column prop=\"abstracts\" label=\"摘要\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"content\" label=\"内容\">\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit\"\r\n                       @click=\"modify(scope.row.id)\"></el-button>\r\n            <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\"\r\n                       @click=\"remove(scope.row.id, scope.row.title)\"></el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                     :current-page=\"queryCondition.currentPage\" :page-sizes=\"[1, 4, 5, 10]\"\r\n                     :page-size=\"queryCondition.pageSize\" layout=\"total, sizes, prev, pager, next, jumper\"\r\n                     :total=\"newsPage.total\">\r\n      </el-pagination>\r\n\r\n    </el-card>\r\n    <el-dialog :title=\"actionType\" :visible.sync=\"OpenDialog\" width=\"30%\" center>\r\n      <el-form :model=\"formData\" :rules=\"formRules\" ref=\"formRef\">\r\n        <el-form-item label=\"编号\" label-width=\"100px\" :label-width=\"id\">\r\n          <el-input v-model=\"formData.id\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"标题\" label-width=\"100px\" :label-width=\"title\">\r\n          <el-input v-model.number=\"formData.title\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"摘要\" label-width=\"100px\" :label-width=\"abstracts\">\r\n          <el-input v-model.number=\"formData.abstracts\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"内容\" label-width=\"100px\" :label-width=\"content\">\r\n          <el-input v-model.number=\"formData.content\"></el-input>\r\n        </el-form-item>\r\n\r\n      </el-form>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"OpenDialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addOrModify\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nexport default {\r\n\r\n  //组件使用的数据\r\n\r\n  data() {\r\n\r\n    return {\r\n\r\n      newPage: [],\r\n\r\n      queryCondition: {\r\n        id: '',\r\n        title: '',\r\n        currentPage: 1,\r\n        pageSize: 10,\r\n      },\r\n      OpenDialog: false,\r\n      actionType: '',\r\n      formData: {\r\n        id: '',\r\n        title: '',\r\n        abstracts:'',\r\n        content:'',\r\n        status: 0,\r\n      },\r\n      formRules: {\r\n        title: [\r\n          { required: true, message: '请输入标题', trigger: 'blur' }\r\n        ],\r\n\r\n        abstracts: [\r\n          { required: true, message: '请输入摘要', trigger: 'blur' }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入内容', trigger: 'blur' },\r\n        ]\r\n      },\r\n      news: [],\r\n    }\r\n  },\r\n  methods: {\r\n    getNewList() {\r\n      this.$http.get('/api/news/lists', { params: this.queryCondition }).then(\r\n          res => {\r\n            console.log(res)\r\n            this.newPage = res.data.data.newsPage.records\r\n          }\r\n      )\r\n    },\r\n    handleSizeChange(val) {\r\n      this.queryCondition.pageSize = val;\r\n      this.getNewList();\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.queryCondition.currentPage = val;\r\n      this.getNewList();\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.news = val\r\n    },\r\n\r\n    add() {\r\n      this.formData = {}\r\n\r\n      this.actionType = '添加新闻'\r\n\r\n      this.OpenDialog = true\r\n    },\r\n    modify(id) {\r\n      this.$http.get('/api/news/get/' + id).then(\r\n          res => {\r\n            if (res.data.status == 1) {\r\n              this.formData = res.data.data.news;\r\n\r\n              this.actionType = '修改新闻';\r\n\r\n              this.OpenDialog = true;\r\n\r\n            } else {\r\n              this.$message.error(res.data.message)\r\n            }\r\n          }\r\n      )\r\n    },\r\n    addOrModify() {\r\n      this.$refs.formRef.validate(\r\n          valid => {\r\n            if (valid) {\r\n              if (this.actionType == '添加设施') {\r\n                this.$http.post('/api/news/add', this.formData).then(\r\n                    res => {\r\n                      if (res.data.status == 1) {\r\n                        this.$message.success(res.data.message)\r\n\r\n                        this.getNewList()\r\n                      } else {\r\n                        this.$message.error(res.data.message)\r\n                      }\r\n                    }\r\n                )\r\n              } else {\r\n                let data = {\r\n                  id: this.formData.id,\r\n                  title: this.formData.title,\r\n                  abstracts: this.formData.abstracts,\r\n                  content: this.formData.content,\r\n                }\r\n                this.$http.post('/api/news/modify', data).then(\r\n                    res => {\r\n                      if (res.data.status == 1) {\r\n                        this.$message.success(res.data.message)\r\n\r\n                        this.getNewList()\r\n                      } else {\r\n                        this.$message.error(res.data.message)\r\n                      }\r\n                    }\r\n                )\r\n              }\r\n              this.OpenDialog = false\r\n            } else {\r\n              this.$message.error(\"输入数据有误，请检查后再提交\")\r\n            }\r\n          }\r\n      )\r\n    },\r\n    deleteBatch() {\r\n\r\n      let ids = ''\r\n      let titles = ''\r\n\r\n      this.news.forEach(news => {\r\n        ids += news.id + ','\r\n        titles += news.title + ','\r\n      })\r\n\r\n      ids = ids.substring(0, ids.length - 1)\r\n      titles = titles.substring(0, titles.length - 1)\r\n\r\n      const result = this.$confirm(\r\n          '是否确认删除【' + titles + '】', '删除确认',\r\n          {\r\n            confirmButtonText: '删除',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n      ).then(() => {\r\n        console.log(ids)\r\n        this.$http.delete('/api/news/deleteBatch?ids=' + ids).then(\r\n            res => {\r\n              if (res.data.status == 1) {\r\n                this.$message.success(res.data.message)\r\n\r\n                this.getNewList()\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }).catch(() => { })\r\n    },\r\n\r\n    remove(id, title) {\r\n\r\n      this.$confirm(\r\n          '是否确认删除【' + title + '】', '删除确认',\r\n          {\r\n            confirmButtonText: '删除',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n      ).then(() => {\r\n        this.$http.delete('/api/news/remove/' + id).then(\r\n            res => {\r\n              if (res.data.status == 1) {\r\n                this.$message.success(res.data.message)\r\n\r\n                this.getNewList()\r\n              } else {\r\n                this.$message.error(res.data.message)\r\n              }\r\n            }\r\n        )\r\n      }).catch(() => { })\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n\r\n    this.getNewList();\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.tag {\r\n  margin-right: 20px;\r\n  margin-left: 10px;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}